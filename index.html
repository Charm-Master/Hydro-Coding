<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Source Coding Challenges</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        header {
            background: #007BFF;
            color: #fff;
            padding: 10px 20px;
            text-align: center;
        }

        nav {
            margin: 20px 0;
        }

        nav a {
            margin: 0 15px;
            color: #fff;
            text-decoration: none;
        }

        nav a:hover {
            text-decoration: underline;
        }

        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
        }

        h2 {
            color: #007BFF;
        }

        .challenge {
            background: #fff;
            border: 1px solid #ccc;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
        }

        .challenge h3 {
            margin: 0;
        }

        footer {
            text-align: center;
            padding: 10px 0;
            background: #007BFF;
            color: #fff;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        .contact-form {
            margin-top: 20px;
            background: #fff;
            padding: 20px;
            border-radius: 5px;
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .contact-form button {
            background: #007BFF;
            color: #fff;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        .contact-form button:hover {
            background: #0056b3;
        }

        .signin {
            text-align: center;
            margin: 20px 0;
        }

        .signin button {
            background: #7289DA;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .signin button:hover {
            background: #5b6eae;
        }

        .profile {
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border-radius: 5px;
        }

        .profile h3 {
            margin-top: 0;
        }

        .submission {
            margin-top: 20px;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
        }

        .submission textarea {
            width: 100%;
            height: 60px;
            margin-top: 10px;
        }

        .submission button {
            margin-top: 10px;
        }

        .admin {
            margin-top: 20px;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
        }

        .admin h3 {
            margin-top: 0;
        }

        .admin-table {
            width: 100%;
            margin-top: 10px;
        }

        .admin-table th,
        .admin-table td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        .approved {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .rejected {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <header>
        <h1>Open Source Coding Challenges</h1>
        <nav>
            <a href="#challenges">Challenges</a>
            <a href="#contact">Contact</a>
            <a href="#profile">Profile</a>
            <a href="#admin" id="adminNav" style="display: none;">Admin</a>
        </nav>
    </header>

    <div class="container">
        <section id="challenges">
            <h2>Coding Challenges</h2>

            <div class="challenge">
                <h3>Challenge 1: FizzBuzz</h3>
                <p>Write a program that prints the numbers from 1 to 100. But for multiples of three print "Fizz"
                    instead of the number and for the multiples of five print "Buzz". For numbers which are multiples
                    of both three and five print "FizzBuzz".</p>
                <div class="submission">
                    <h4>Submit Your Solution</h4>
                    <textarea id="solution1" placeholder="Enter your solution..."></textarea>
                    <button onclick="submitSolution('FizzBuzz', 1)">Submit Solution</button>
                </div>
                <h4>Approved Solutions:</h4>
                <div id="approvedSolutions1"></div>
            </div>

            <div class="challenge">
                <h3>Challenge 2: Palindrome Checker</h3>
                <p>Write a function that checks if a given string is a palindrome. A palindrome is a word, phrase,
                    number, or other sequence of characters that reads the same forward and backward (ignoring spaces,
                    punctuation, and capitalization).</p>
                <div class="submission">
                    <h4>Submit Your Solution</h4>
                    <textarea id="solution2" placeholder="Enter your solution..."></textarea>
                    <button onclick="submitSolution('Palindrome Checker', 2)">Submit Solution</button>
                </div>
                <h4>Approved Solutions:</h4>
                <div id="approvedSolutions2"></div>
            </div>

            <div class="challenge">
                <h3>Challenge 3: Factorial</h3>
                <p>Write a function that returns the factorial of a number. The factorial of a non-negative integer n is
                    the product of all positive integers less than or equal to n.</p>
                <div class="submission">
                    <h4>Submit Your Solution</h4>
                    <textarea id="solution3" placeholder="Enter your solution..."></textarea>
                    <button onclick="submitSolution('Factorial', 3)">Submit Solution</button>
                </div>
                <h4>Approved Solutions:</h4>
                <div id="approvedSolutions3"></div>
            </div>
        </section>

        <section id="contact">
            <h2>Contact Us</h2>
            <div class="contact-form">
                <form action="#">
                    <input type="text" placeholder="Your Name" required>
                    <input type="email" placeholder="Your Email" required>
                    <textarea placeholder="Your Message" required></textarea>
                    <button type="submit">Send Message</button>
                </form>
            </div>
        </section>

        <section id="profile">
            <h2>Your Profile</h2>
            <div class="profile">
                <div class="signin">
                    <button onclick="signInWithDiscord()">Sign in with Discord</button>
                </div>
                <h3>User Profile Information</h3>
                <p id="userInfo" style="display: none;"></p>
                <div id="userChallenges" style="display: none;"></div>
            </div>
        </section>

        <section id="admin" style="display: none;">
            <h2>Admin Panel</h2>
            <div class="admin">
                <h3>Pending Submissions</h3>
                <table class="admin-table">
                    <tr>
                        <th>Challenge</th>
                        <th>Submission</th>
                        <th>Action</th>
                    </tr>
                    <tbody id="pendingSubmissions"></tbody>
                </table>
            </div>
        </section>
    </div>

    <footer>
        <p>Open Source Coding Challenges Â© 2024</p>
    </footer>

    <script>
        const clientId = '1300918650026594335'; // Your Discord Client ID
        const redirectUri = 'https://charm-master.github.io/Hydro-Coding'; // Your redirect URL
        let isAdmin = false;
        let userName = '';
        let userPfp = ''; // Variable to store user's profile picture URL
        const adminUserName = 'hydraulic_bolt_46520'; // Admin username

        function signInWithDiscord() {
            // Redirect to Discord's OAuth2 authorization endpoint
            window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=identify%20email`;
        }

        // Function to retrieve user info from Discord
        async function fetchUserInfo() {
            const hash = window.location.hash;

            if (hash) {
                const token = new URLSearchParams(hash.substring(1)).get('access_token');

                const response = await fetch('https://discord.com/api/users/@me', {
                    headers: {
                        Authorization: `Bearer ${token}`
                    }
                });

                const user = await response.json();
                userName = user.username;
                userPfp = user.avatar ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png` : '';
                document.getElementById('userInfo').innerHTML = `Hello, ${userName}! <img src="${userPfp}" alt="Profile Picture" style="width: 50px; border-radius: 50%;">`;
                document.getElementById('userInfo').style.display = 'block';
                document.getElementById('signin').style.display = 'none';
                checkAdmin();
            }
        }

        function checkAdmin() {
            if (userName === adminUserName) {
                isAdmin = true;
                document.getElementById('adminNav').style.display = 'inline';
                loadPendingSubmissions();
            }
        }

        async function loadPendingSubmissions() {
            // Simulated pending submissions (replace with actual data retrieval)
            const submissions = [
                { challenge: 'FizzBuzz', submission: 'function fizzBuzz() { ... }' },
                { challenge: 'Palindrome Checker', submission: 'function isPalindrome(str) { ... }' }
            ];

            const pendingSubmissionsContainer = document.getElementById('pendingSubmissions');
            pendingSubmissionsContainer.innerHTML = ''; // Clear previous entries

            submissions.forEach((submission) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${submission.challenge}</td>
                    <td>${submission.submission}</td>
                    <td><button onclick="approveSubmission('${submission.challenge}')">Approve</button>
                        <button onclick="rejectSubmission('${submission.challenge}')">Reject</button></td>
                `;
                pendingSubmissionsContainer.appendChild(row);
            });
        }

        function submitSolution(challenge, challengeId) {
            const solutionText = document.getElementById(`solution${challengeId}`).value;
            const approvedSolutionsContainer = document.getElementById(`approvedSolutions${challengeId}`);

            if (solutionText) {
                const approvedDiv = document.createElement('div');
                approvedDiv.classList.add('approved');
                approvedDiv.innerText = `${userName} submitted: ${solutionText}`;
                approvedSolutionsContainer.appendChild(approvedDiv);
                document.getElementById(`solution${challengeId}`).value = ''; // Clear the textarea
            }
        }

        function approveSubmission(challenge) {
            alert(`Approved submission for: ${challenge}`);
            // Code to update backend for approved submission goes here
        }

        function rejectSubmission(challenge) {
            alert(`Rejected submission for: ${challenge}`);
            // Code to update backend for rejected submission goes here
        }

        // Check for user info on page load
        window.onload = fetchUserInfo;

    </script>
</body>

</html>
